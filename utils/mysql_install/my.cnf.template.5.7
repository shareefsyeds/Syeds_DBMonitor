(the client)
Port = MYSQL_PORT
Socket = MYSQL_PATH/run/mysql. The sock

(mysql)
Prompt = ": \ u @ mysqldb \ R \ m: \ s (\ d) >.
No - auto - rehash

(mysqld)
User = mysql
Port = MYSQL_PORT
Basedir = MYSQL_PATH
Datadir = DATA_PATH
Socket = MYSQL_PATH/run/mysql. The sock
The pid file = mysqldb. Pid
Character - set - server = utf8mb4
Skip_name_resolve = 1

# if your MySQL database is mainly run outside, please be sure to adjust the parameters according to actual situation
Default_time_zone = "+ 8"

Open_files_limit = 65535
Back_log = 1024
Max_connections = 3000
Max_connect_errors = 1000000
Table_open_cache = 1024
Table_definition_cache = 1024
Table_open_cache_instances = 64
Thread_stack = 512 k
External lock = FALSE
Max_allowed_packet = 32 m
Sort_buffer_size = 4 m
Join_buffer_size = 4 m
Thread_cache_size = 768
Interactive_timeout = 600
Wait_timeout = 600
Both tmp_table_size = 32 m
Max_heap_table_size = 32 m
Slow_query_log = 1
Log_timestamps = system
Slow_query_log_file = DATA_PATH/missile. The log
Log error = DATA_PATH/error log
Long_query_time = 0.1
Log_queries_not_using_indexes = 1
Log_throttle_queries_not_using_indexes = 60
Min_examined_row_limit = 100
Log_slow_admin_statements = 1
Log_slow_slave_statements = 1
Server id = MYSQL_PORT
The log - bin = DATA_PATH/mybinlog
Sync_binlog = 1
Binlog_cache_size = 4 m
Max_binlog_cache_size = 2 g
Max_binlog_size = 1 g

# note: MySQL 8.0, binlog_expire_logs_seconds options also exist, will ignore expire_logs_days options
Expire_logs_days = 7

Master_info_repository = table
Relay_log_info_repository = table
Gtid_mode = on
Enforce_gtid_consistency = 1
log_slave_updates
Slave - rows - search - algorithms = 'INDEX_SCAN, HASH_SCAN'
Binlog_format = line
Binlog_checksum = 1
Relay_log_recovery = 1
Relay - log - purge = 1
Key_buffer_size = 32 m
Read_buffer_size = 8 meters
Read_rnd_buffer_size = 4 m
Bulk_insert_buffer_size = 64
Myisam_sort_buffer_size = 128
Myisam_max_sort_file_size = 10 grams
Myisam_repair_threads = 1
Lock_wait_timeout = 3600
Explicit_defaults_for_timestamp = 1
Innodb_thread_concurrency = 0
Innodb_sync_spin_loops = 100
Innodb_spin_wait_delay = 30

Transaction_isolation = repeatable read
# innodb_additional_mem_pool_size = 16 m
Innodb_buffer_pool_size = INNODB_SIZE
Innodb_buffer_pool_instances = 4
Innodb_buffer_pool_load_at_startup = 1
Innodb_buffer_pool_dump_at_shutdown = 1
Innodb_data_file_path = ibdata1:1 g: autoextend
Innodb_flush_log_at_trx_commit = 1
Innodb_log_buffer_size = 32 m
Innodb_log_file_size = 2 g
Innodb_log_files_in_group = 2
Innodb_max_undo_log_size = 4 g
Innodb_undo_directory = DATA_PATH/undolog
Innodb_undo_tablespaces = 95

# IOPS capacity appropriate adjustments according to your server
# general with ordinary SSD disk, you can adjust to 10000-20000
# configuration high-end PCIe SSD card, you can adjust the higher, such as 50000-80000
Innodb_io_capacity = 4000
Innodb_io_capacity_max = 8000
Innodb_flush_sync = 0
Innodb_flush_neighbors = 0
Innodb_write_io_threads = 8
Innodb_read_io_threads = 8
Innodb_purge_threads = 4
Innodb_page_cleaners = 4
Innodb_open_files = 65535
Innodb_max_dirty_pages_pct = 50
Innodb_flush_method = O_DIRECT
Innodb_lru_scan_depth = 4000
Innodb_checksum_algorithm = crc32
Innodb_lock_wait_timeout = 10
Innodb_rollback_on_timeout = 1
Innodb_print_all_deadlocks = 1
Innodb_file_per_table = 1
Innodb_online_alter_log_max_size = 4 g
Innodb_stats_on_metadata = 0
Innodb_undo_log_truncate = 1

# some MySQL 5.7 var
Innodb_checksums = 1
# innodb_file_format = barracuda
# innodb_file_format_max = barracuda
Query_cache_size = 0
Query_cache_type = 0
Innodb_undo_logs = 128

# note: MySQL 8.0.16 began to delete this option
Internal_tmp_disk_storage_engine = InnoDB

Innodb_status_file = 1
# note: open innodb_status_output & innodb_status_output_locks, may cause the error log file is growing rapidly
Innodb_status_output = 0
Innodb_status_output_locks = 0

# performance_schema
Performance_schema = 1
Memory performance_schema_instrument = '% % ='
Performance_schema_instrument = '% % = locked'

# innodb monitoring
Innodb_monitor_enable = "module_innodb"
Innodb_monitor_enable = "module_server"
Innodb_monitor_enable = "module_dml"
Innodb_monitor_enable = "module_ddl"
Innodb_monitor_enable = "module_trx"
Innodb_monitor_enable = "module_os"
Innodb_monitor_enable = "module_purge"
Innodb_monitor_enable = "module_log"
Innodb_monitor_enable = "module_lock"
Innodb_monitor_enable = "module_buffer"
Innodb_monitor_enable = "module_index"
Innodb_monitor_enable = "module_ibuf_system"
Innodb_monitor_enable = "module_buffer_page"
Innodb_monitor_enable = "module_adaptive_hash"

(the mysqldump)
fast
Max_allowed_packet = 32 m